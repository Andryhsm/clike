{"changed":true,"filter":false,"title":"StoreRepository.php","tooltip":"/app/Repositories/StoreRepository.php","value":"<?php\n\nnamespace App\\Repositories;\n\n\nuse App\\Interfaces\\StoreRepositoryInterface;\nuse App\\RequestBrand;\nuse App\\Service\\UploadService;\nuse App\\Store;\nuse App\\User;\nuse App\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Hash;\n\nclass StoreRepository implements StoreRepositoryInterface\n{\n\tprotected $model;\n\n\tpublic function __construct(Store $store)\n\t{\n\t\t$this->model = $store;\n\t}\n\n\tpublic function getAll()\n\t{\n\t\treturn $this->model->orderBy('store_id', 'desc')->get();\n\t}\n\n\tpublic function save($input,$save_from=true)\n\t{\n\t\t$managers = [];\n\t\t$first_store_id = 0;\n\t\t//save store manager data\n\t\tif(isset($input['manager']) && !empty($input['manager'])){\n\t\t\tforeach ($input['manager'] as $manager){\n\t\t\t\t$user = new User();\n\t\t\t\t$user->role_id = '2';\n\t\t\t\t$user->first_name = $manager['first_name'];\n\t\t\t\t$user->last_name = $manager['last_name'];\n\t\t\t\t$user->email = $manager['email'];\n\t\t\t\t$user->password = Hash::make($manager['password']);\n\t\t\t\t$user->phone_number = $manager['sms'];\n\t\t\t\t$user->status = '1';\n\t\t\t\t$user->profile_image = '';\n\t\t\t\t/*$user->position = $manager['position'];*/\n\t\t\t\t$user->save();\n\n\n\t\t\t\t//save in store_user\n\t\t\t\t$store_user = [\n\t\t\t\t\t'is_global_manager'=> isset($manager['global_manager'])? $manager['global_manager'] : 0,\n\t\t\t\t\t'compte_principal'=> isset($manager['compte_principle'])? $manager['compte_principle'] : 0,\n\t\t\t\t\t'receive_request'=> isset($manager['receive_request'])? $manager['receive_request'] : 0,\n\t\t\t\t\t'reply_request'=> isset($manager['reply_request'])? $manager['reply_request'] : 0,\n\t\t\t\t];\n\t\t\t\t$managers[$user->user_id] = $store_user;\n\t\t\t}\n\t\t}\n\n\t\tif(!$save_from){\n\t\t\t//save in store_user\n\t\t\t$store_user = [\n\t\t\t\t'is_global_manager'=> 0,\n\t\t\t\t'compte_principal'=>0,\n\t\t\t\t'receive_request'=>0,\n\t\t\t\t'reply_request'=>0,\n\t\t\t];\n\t\t\t$managers[\\Auth::id()] = $store_user;\n\t\t}\n\t\tif(!empty($input['store'])){\n\t\t\t//save store data\n\t\t\tforeach ($input['store'] as $index=>$store){\n\t\t\t\t$store_model = new Store();\n\t\t\t\t$store_model->store_name = $store['shop_name'];\n\t\t\t\t$store_model->registration_number = $store['registration_number'];\n\t\t\t\t$store_model->phone = $store['main_phone'];\n\t\t\t\t$store_model->email = $store['main_email'];\n\t\t\t\t$store_model->logo = (!empty($store['logo_image']))?$store['logo_image']:'';\n\t\t\t\t$store_model->shop_image = (!empty($store['shop_image'])) ? $store['shop_image'] :'';\n\t\t\t\t$store_model->short_description = $store['short_description'];\n\t\t\t\t$store_model->address1 = $store['address1'];\n\t\t\t\t$store_model->address2 = $store['address2'];\n\t\t\t\t$store_model->city = $store['city'];\n\t\t\t\t$store_model->zip = $store['zip'];\n\t\t\t\t$store_model->country_id = $store['country_id'];\n\t\t\t\t$store_model->state_id = $store['state_id'];\n\t\t\t\t$store_model->latitude = $store['latitude'];\n\t\t\t\t$store_model->longitude = $store['longitude'];\n\t\t\t\t$store_model->created_by = auth()->guard('admin')->user()->admin_id;\n\t\t\t\t$store_model->save();\n\t\t\t\t$first_store_id = ($index==0)?$store_model->store_id :$first_store_id;\n\t\t\t\tforeach ($managers as $manager_id=>$manager){\n\t\t\t\t\t$store_model->users()->attach($manager_id,$manager);\n\t\t\t\t}\n\n\t\t\t\t//save all store brand\n\t\t\t\tif(isset($store['brand_list']) && !empty($store['brand_list'])){\n\t\t\t\t\tforeach ($store['brand_list'] as $brand_id)\n\t\t\t\t\t{\n\t\t\t\t\t\t$store_model->brands()->attach($brand_id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t// save request brand data\n\t\tif(!empty($input['brand_name'])){\n\t\t\t$this->saveBrand($input,$first_store_id);\n\t\t}\n\t\treturn $this->model;\n\t}\n\n\tpublic function saveBrand($input,$first_store_id){\n\t\t$request_brand = new RequestBrand();\n\t\t$request_brand->brand_name = $input['brand_name'];\n\t\t$request_brand->website = $input['website'];\n\t\t$request_brand->store_id =$first_store_id;\n\t\t$request_brand->save();\n\t}\n\n\tpublic function getById($store_id)\n\t{\n\t\treturn $this->model->with('users','requestBrand','brands','hours','hours.day')->where('store_id',$store_id)->first();\n\t}\n\n\tpublic function updateById($store_id, $input)\n\t{\n\t\t//save store manager data\n\t\t$first_store_id = 0;\n\t\t$managers = [];\n\t\t$new_manager_id = [];\n\t\t$old_manager_id = isset($input['old_manager_id']) ? explode(',',$input['old_manager_id']) : [];\n\t\tif(isset($input['manager']) && !empty($input['manager'])){\n\t\t\tforeach ($input['manager'] as $manager){\n\t\t\t\tif(isset($manager['manager_id']))\n\t\t\t\t{\n\t\t\t\t\t$new_manager_id[] = $manager['manager_id'];\n\t\t\t\t}\n\n\t\t\t\t$user = User::findOrNew(isset($manager['manager_id']) ? $manager['manager_id'] : 0);\n\t\t\t\t$user->role_id = '2';\n\t\t\t\t$user->first_name = $manager['first_name'];\n\t\t\t\t$user->last_name = $manager['last_name'];\n\t\t\t\t$user->email = $manager['email'];\n\t\t\t\t$user->password = (!empty($manager['password']) && $manager['password'] != null) ?  Hash::make($manager['password']) : $user->password;\n\t\t\t\t$user->phone_number = $manager['sms'];\n\t\t\t\t$user->status = '1';\n\t\t\t\t$user->profile_image = '';\n\t\t\t\t/*$user->position = $manager['position'];*/\n\t\t\t\t$user->save();\n\t\t\t\t//save in store_user\n//\t\t\t\t$store->users()->detach($user->user_id);\n\t\t\t\t$store_user = [\n\t\t\t\t\t'is_global_manager'=> isset($manager['global_manager'])? $manager['global_manager'] : 0,\n\t\t\t\t\t'compte_principal'=> isset($manager['compte_principle'])? $manager['compte_principle'] : 0,\n\t\t\t\t\t'receive_request'=> isset($manager['receive_request'])? $manager['receive_request'] : 0,\n\t\t\t\t\t'reply_request'=> isset($manager['reply_request'])? $manager['reply_request'] : 0,\n\t\t\t\t];\n\t\t\t\t$managers[$user->user_id] = $store_user;\n\n\n//\t\t\t\t$store->users()->attach($user->user_id,$store_user);\n\t\t\t}\n\t\t}\n\t\t$removable_manager = array_diff($old_manager_id,$new_manager_id);\n\n\t\tif(count($removable_manager)>0){\n\t\t\tUser::whereIn('user_id',$removable_manager)\n\t\t\t\t->delete();\n\t\t}\n\n\n\t\tif(!empty($input['store'])) {\n\t\t\t//save store data\n\t\t\tforeach ($input['store'] as $index => $store) {\n\t\t\t\t$store_model = $this->model->findOrNew(($index==0) ? $store_id:0);\n\t\t\t\t$store_model->store_name = $store['shop_name'];\n\t\t\t\t$store_model->registration_number = $store['registration_number'];\n\t\t\t\t$store_model->phone = $store['main_phone'];\n\t\t\t\t$store_model->email = $store['main_email'];\n\t\t\t\tif(!empty($input['logo_image'])){\n\t\t\t\t\t$store_model->logo = $store['logo_image'];\n\t\t\t\t}\n\t\t\t\tif(!empty($input['shop_image'])){\n\t\t\t\t\t$store_model->shop_image = $store['shop_image'];\n\t\t\t\t}\n\t\t\t\t$store_model->short_description = $store['short_description'];\n\t\t\t\t$store_model->address1 = $store['address1'];\n\t\t\t\t$store_model->address2 = $store['address2'];\n\t\t\t\t$store_model->city = $store['city'];\n\t\t\t\t$store_model->zip = $store['zip'];\n\t\t\t\t$store_model->country_id = $store['country_id'];\n\t\t\t\t$store_model->state_id = $store['state_id'];\n\t\t\t\t$store_model->latitude = $store['latitude'];\n\t\t\t\t$store_model->longitude = $store['longitude'];\n\t\t\t\t$store_model->fix_phone = $input['fix_phone'];\n\t\t\t\t$store_model->cell_phone = $input['cell_phone'];\n\t\t\t\t$store_model->tva = $input['tva'];\n\t\t\t\t$store_model->save();\n\t\t\t\t$first_store_id = ($index==0)?$store_model->store_id :$first_store_id;\n\n\t\t\t\tforeach ($managers as $user_id => $manager)\n\t\t\t\t{\n\t\t\t\t\t$store_model->users()->detach($user_id);\n\t\t\t\t\t$store_model->users()->attach($user_id,$manager);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic function deleteById($store_id)\n\t{\n\t\t$store = $this->model->find($store_id);\n\t\t$store->users()->delete();\n\t\t$store->brands()->delete();\n\t\t$store->requestBrand()->delete();\n\t\treturn $store->delete();\n\t}\n\n\tpublic function getByUserId($user_id){\n\t\t$stores = $this->model->whereHas('users',function($query) use($user_id){\n\t\t\t$query->where('store_users.user_id',$user_id);\n\t\t})->paginate(2);\n\t\treturn $stores;\n\t}\n\n\tpublic function getCount()\n\t{\n\t\treturn $this->model->count();\n\t}\n\n\tpublic function getDashboardStore()\n\t{\n\t\treturn $this->model->orderBy('store_id','desc')->limit(3)->get();\n\t}\n\n\tpublic function add($input, $user_id=null)\n\t{\n\t\t/*add store*/\n\t\t$managers = [];\n\t\t$all_users = [];\n\t\tif($user_id==null && isset($input['manager']) && !empty($input['manager'])){\n\t\t\tforeach ($input['manager'] as $manager){\n\t\t\t\t$user =new User();\n\t\t\t\t$user->role_id = '2';\n\t\t\t\t$user->first_name = $manager['first_name'];\n\t\t\t\t$user->last_name = $manager['last_name'];\n\t\t\t\t$user->email = $manager['email'];\n\t\t\t\t$user->password = Hash::make($manager['password']);\n\t\t\t\t$user->phone_number = $manager['sms'];\n\t\t\t\t$user->status = '1';\n\t\t\t\t$user->profile_image = '';\n\t\t\t\t/*$user->position = $manager['position'];*/\n\t\t\t\t$user->save();\n\t\t\t\t$all_users[]=$user;\n\t\t\t\t//save in store_user\n\t\t\t\t$store_user = [\n\t\t\t\t\t'is_global_manager'=> isset($manager['global_manager'])? $manager['global_manager'] : 0,\n\t\t\t\t\t'compte_principal'=> isset($manager['compte_principle'])? $manager['compte_principle'] : 0,\n\t\t\t\t\t'receive_request'=> isset($manager['receive_request'])? $manager['receive_request'] : 0,\n\t\t\t\t\t'reply_request'=> isset($manager['reply_request'])? $manager['reply_request'] : 0,\n\t\t\t\t];\n\t\t\t\t$managers[$user->user_id] = $store_user;\n\t\t\t}\n\t\t}\n\n\t\tif($user_id!=null){\n\t\t\t$store_user = [\n\t\t\t\t'is_global_manager'=> 0,\n\t\t\t\t'compte_principal'=>  0,\n\t\t\t\t'receive_request'=>  0,\n\t\t\t\t'reply_request'=> 0,\n\t\t\t];\n\t\t\t$managers[$user_id] = $store_user;\n\t\t}\n\n\n\t\t/*save store*/\n\t\t$store_model = new Store();\n\t\t$store_model->store_name = $input['shop_name'];\n\t\t$store_model->registration_number = $input['registration_number'];\n\t\t$store_model->phone = $input['main_phone'];\n\t\t$store_model->email = $input['main_email'];\n\t\t$store_model->logo = (!empty($input['logo_image']))?$input['logo_image']:'';\n\t\t$store_model->shop_image = (!empty($input['shop_image'])) ? $input['shop_image'] :'';\n\t\t$store_model->short_description = $input['short_description'];\n\t\t$store_model->address1 = $input['address1'];\n\t\t$store_model->address2 = $input['address2'];\n\t\t$store_model->city = $input['city'];\n\t\t$store_model->zip = $input['zip_code'];\n\t\t$store_model->country_id = $input['country_id'];\n\t\t$store_model->state_id = $input['state_id'];\n\t\t$store_model->latitude = $input['latitude'];\n\t\t$store_model->longitude = $input['longitude'];\n\t\t$store_model->fix_phone = $input['fix_phone'];\n\t\t$store_model->cell_phone = $input['cell_phone'];\n\t\t$store_model->tva = $input['tva'];\n\t\t$store_model->created_by = null;\n\t\t$store_model->save();\n\n\t\t//Store opening day and opening hour in database\n\t\t$opening_day_id_array = $input['opening_day_id'];\n\t\t$opening_hour_array = $input['opening_hour'];\n\t\t$closure_hour_array = $input['closure_hour'];\n\t\tforeach ($opening_day_id_array as $key => $opening_day) {\n\t\t\t$store_opening_hour = new \\App\\StoreOpeningHour();\n\t\t\t$store_opening_hour->opening_hour = (isset($opening_hour_array[$key])) ? $opening_hour_array[$key] : null;\n\t\t\t$store_opening_hour->closure_hour = (isset($closure_hour_array[$key])) ? $closure_hour_array[$key] : null;\n\t\t\t$store_opening_hour->opening_day_id = $opening_day;\n\t\t\t$store_opening_hour->store_id = $store_model->store_id;\n\t\t\t$store_opening_hour->save();\n\t\t}\n\t\t\n\n\t\tif(!empty($managers)){\n\t\t\tforeach ($managers as $manager_id=>$manager){\n\t\t\t\t$store_model->users()->attach($manager_id,$manager);\n\t\t\t}\n\t\t}\n\n\t\t/*save store brand*/\n\t\t/*if(isset($input['brand_list']) && !empty($input['brand_list'])){\n\t\t\tforeach ($input['brand_list'] as $brand_id)\n\t\t\t{\n\t\t\t\t$store_model->brands()->attach($brand_id);\n\t\t\t}\n\t\t}\n\n\t\tif(!empty($input['brand_name'])){\n\t\t\t$this->saveBrand($input,$store_model->store_id);\n\t\t}*/\n\t\treturn isset($all_users) ? $all_users : $store_model;\n\t}\n\n\tpublic function update($id, $input)\n\t{\n\t\t/*update user*/\n\n\t\t$new_manager_id = [];\n\t\t$all_users = [];\n\t\t$old_manager_id = isset($input['old_manager_id']) ? explode(',',$input['old_manager_id']) : [];\n\t\t$managers = [];\n\t\tif(isset($input['manager']) && !empty($input['manager'])){\n\t\t\tforeach ($input['manager'] as $manager){\n\n\t\t\t\tif(isset($manager['manager_id']))\n\t\t\t\t{\n\t\t\t\t\t$new_manager_id[] = $manager['manager_id'];\n\t\t\t\t}\n\t\t\t\t$user = User::findOrNew(isset($manager['manager_id']) ? $manager['manager_id'] : 0);\n\t\t\t\t$user->role_id = '2';\n\t\t\t\t$user->first_name = $manager['first_name'];\n\t\t\t\t$user->last_name = $manager['last_name'];\n\t\t\t\t$user->email = $manager['email'];\n\t\t\t\t$user->password = (!empty($manager['password']) && $manager['password'] != null) ?  Hash::make($manager['password']) : $user->password;;\n\t\t\t\t$user->phone_number = $manager['sms'];\n\t\t\t\t$user->status = '1';\n\t\t\t\t$user->profile_image = '';\n\t\t\t\t/*$user->position = $manager['position'];*/\n\t\t\t\t$user->save();\n\t\t\t\t$all_users[]=$user;\n\t\t\t\t//save in store_user\n\t\t\t\t$store_user = [\n\t\t\t\t\t'is_global_manager'=> isset($manager['global_manager'])? $manager['global_manager'] : 0,\n\t\t\t\t\t'compte_principal'=> isset($manager['compte_principle'])? $manager['compte_principle'] : 0,\n\t\t\t\t\t'receive_request'=> isset($manager['receive_request'])? $manager['receive_request'] : 0,\n\t\t\t\t\t'reply_request'=> isset($manager['reply_request'])? $manager['reply_request'] : 0,\n\t\t\t\t];\n\t\t\t\t$managers[$user->user_id] = $store_user;\n\t\t\t}\n\t\t}\n\n\t\t$removable_manager = array_diff($old_manager_id,$new_manager_id);\n\t\tif(count($removable_manager)>0){\n\t\t\tUser::whereIn('user_id',$removable_manager)\n\t\t\t\t->delete();\n\t\t}\n\n\t\t/*update store*/\n\t\t$store_model = $this->model->findOrNew($id);\n\t\t$store_model->store_name = $input['shop_name'];\n\t\t$store_model->registration_number = $input['registration_number'];\n\t\t$store_model->phone = $input['main_phone'];\n\t\t$store_model->email = $input['main_email'];\n\t\tif(!empty($input['logo_image'])){\n\t\t\t$store_model->logo = $input['logo_image'];\n\t\t}\n\t\tif(!empty($input['shop_image'])){\n\t\t\t$store_model->shop_image = $input['shop_image'];\n\t\t}\n\t\t$store_model->short_description = $input['short_description'];\n\t\t$store_model->address1 = $input['address1'];\n\t\t$store_model->address2 = $input['address2'];\n\t\t$store_model->city = $input['city'];\n\t\t$store_model->zip = $input['zip_code'];\n\t\t$store_model->country_id = $input['country_id'];\n\t\t$store_model->state_id = $input['state_id'];\n\t\t$store_model->latitude = $input['latitude'];\n\t\t$store_model->longitude = $input['longitude'];\n\t\t$store_model->fix_phone = $input['fix_phone'];\n\t\t$store_model->cell_phone = $input['cell_phone'];\n\t\t$store_model->tva = $input['tva'];\n\t\t$store_model->save();\n\n\t\t$store_model->users()->detach();\n\t\t\n\t\t//Store opening day and opening hour in database\n\t\t$opening_day_id_array = $input['opening_day_id'];\n\t\t$opening_hour_array = $input['opening_hour'];\n\t\t$closure_hour_array = $input['closure_hour'];\n\t\tforeach ($opening_day_id_array as $key => $opening_day) {\n\t\t\t$store_opening_hour = \\App\\StoreOpeningHour::findOrNew();\n\t\t\t$store_opening_hour->opening_hour = (isset($opening_hour_array[$key])) ? $opening_hour_array[$key] : null;\n\t\t\t$store_opening_hour->closure_hour = (isset($closure_hour_array[$key])) ? $closure_hour_array[$key] : null;\n\t\t\t$store_opening_hour->opening_day_id = $opening_day;\n\t\t\t$store_opening_hour->store_id = $store_model->store_id;\n\t\t\t$store_opening_hour->save();\n\t\t}\n\t\t\n\t\t/*save store user*/\n\t\tif(!empty($managers)){\n\t\t\tforeach ($managers as $manager_id=>$manager){\n\t\t\t\t$store_model->users()->attach($manager_id,$manager);\n\t\t\t}\n\t\t}\n\t\t/*$store_model->brands()->detach();\n\t\tif(isset($input['brand_list']) && !empty($input['brand_list'])){\n\t\t\tforeach ($input['brand_list'] as $brand_id)\n\t\t\t{\n\t\t\t\t$store_model->brands()->attach($brand_id);\n\t\t\t}\n\t\t}\n\t\tif(!empty($input['brand_name'])){\n\t\t\t$request_brand = RequestBrand::findOrNew($input['request_brand_id']);\n\t\t\t$request_brand->brand_name = $input['brand_name'];\n\t\t\t$request_brand->website = $input['website'];\n\t\t\t$request_brand->store_id =$store_model->store_id;\n\t\t\t$request_brand->save();\n\t\t}*/\n\t\treturn $store_model;\n\n\t}\n\n}","undoManager":{"mark":8,"position":11,"stack":[[{"start":{"row":121,"column":59},"end":{"row":121,"column":60},"action":"insert","lines":[","],"id":2}],[{"start":{"row":121,"column":60},"end":{"row":121,"column":62},"action":"insert","lines":["''"],"id":3}],[{"start":{"row":121,"column":61},"end":{"row":121,"column":66},"action":"insert","lines":["hours"],"id":4}],[{"start":{"row":121,"column":67},"end":{"row":121,"column":68},"action":"insert","lines":[","],"id":5}],[{"start":{"row":121,"column":68},"end":{"row":121,"column":70},"action":"insert","lines":["''"],"id":6}],[{"start":{"row":121,"column":69},"end":{"row":121,"column":70},"action":"insert","lines":["h"],"id":7},{"start":{"row":121,"column":70},"end":{"row":121,"column":71},"action":"insert","lines":["o"]},{"start":{"row":121,"column":71},"end":{"row":121,"column":72},"action":"insert","lines":["u"]},{"start":{"row":121,"column":72},"end":{"row":121,"column":73},"action":"insert","lines":["r"]},{"start":{"row":121,"column":73},"end":{"row":121,"column":74},"action":"insert","lines":["s"]},{"start":{"row":121,"column":74},"end":{"row":121,"column":75},"action":"insert","lines":["."]}],[{"start":{"row":121,"column":75},"end":{"row":121,"column":76},"action":"insert","lines":["d"],"id":8},{"start":{"row":121,"column":76},"end":{"row":121,"column":77},"action":"insert","lines":["a"]},{"start":{"row":121,"column":77},"end":{"row":121,"column":78},"action":"insert","lines":["y"]}],[{"start":{"row":403,"column":34},"end":{"row":404,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":404,"column":0},"end":{"row":404,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":404,"column":2},"end":{"row":405,"column":0},"action":"insert","lines":["",""]},{"start":{"row":405,"column":0},"end":{"row":405,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":405,"column":2},"end":{"row":406,"column":0},"action":"insert","lines":["",""]},{"start":{"row":406,"column":0},"end":{"row":406,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":405,"column":2},"end":{"row":416,"column":3},"action":"insert","lines":["//Store opening day and opening hour in database","\t\t$opening_day_id_array = $input['opening_day_id'];","\t\t$opening_hour_array = $input['opening_hour'];","\t\t$closure_hour_array = $input['closure_hour'];","\t\tforeach ($opening_day_id_array as $key => $opening_day) {","\t\t\t$store_opening_hour = new \\App\\StoreOpeningHour();","\t\t\t$store_opening_hour->opening_hour = (isset($opening_hour_array[$key])) ? $opening_hour_array[$key] : null;","\t\t\t$store_opening_hour->closure_hour = (isset($closure_hour_array[$key])) ? $closure_hour_array[$key] : null;","\t\t\t$store_opening_hour->opening_day_id = $opening_day;","\t\t\t$store_opening_hour->store_id = $store_model->store_id;","\t\t\t$store_opening_hour->save();","\t\t}"],"id":10}],[{"start":{"row":410,"column":25},"end":{"row":410,"column":29},"action":"remove","lines":["new "],"id":11}],[{"start":{"row":410,"column":46},"end":{"row":410,"column":48},"action":"remove","lines":["()"],"id":12},{"start":{"row":410,"column":46},"end":{"row":410,"column":58},"action":"insert","lines":["::findOrNew("]}],[{"start":{"row":410,"column":58},"end":{"row":410,"column":59},"action":"insert","lines":[")"],"id":13}]]},"ace":{"folds":[],"scrolltop":5415.5,"scrollleft":0,"selection":{"start":{"row":404,"column":2},"end":{"row":404,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":385,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1527838119856}