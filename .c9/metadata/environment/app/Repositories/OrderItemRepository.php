{"filter":false,"title":"OrderItemRepository.php","tooltip":"/app/Repositories/OrderItemRepository.php","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":171,"column":1},"end":{"row":185,"column":2},"action":"remove","lines":["public function getHistoryItemByMerchant($user_id)","\t{","\t\t$items = OrderItem::whereNotExists(function($query) use ($user_id)","\t\t{","\t\t\t$query->select('*')","\t\t\t\t->from('order_item_request')","\t\t\t\t->whereRaw('order_item_request.item_id = order_item.order_item_id')","\t\t\t\t->where('order_item_request.merchant_id','=',$user_id);","\t\t})","\t\t\t->with(['product', 'attributes'])","\t\t\t->whereIn('order_status_id',[OrderItem::ORDER_STATUS_FINISHED,OrderItem::ORDER_STATUS_CANCELED,OrderItem::ORDER_STATUS_NEGATIVE])","\t\t\t->get();","\t\treturn $items;","\t\t","\t}"],"id":224}],[{"start":{"row":169,"column":1},"end":{"row":172,"column":0},"action":"remove","lines":["","\t","\t",""],"id":225}],[{"start":{"row":118,"column":1},"end":{"row":119,"column":0},"action":"insert","lines":["",""],"id":226},{"start":{"row":119,"column":0},"end":{"row":119,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":118,"column":1},"end":{"row":132,"column":2},"action":"insert","lines":["public function getHistoryItemByMerchant($user_id)","\t{","\t\t$items = OrderItem::whereNotExists(function($query) use ($user_id)","\t\t{","\t\t\t$query->select('*')","\t\t\t\t->from('order_item_request')","\t\t\t\t->whereRaw('order_item_request.item_id = order_item.order_item_id')","\t\t\t\t->where('order_item_request.merchant_id','=',$user_id);","\t\t})","\t\t\t->with(['product', 'attributes'])","\t\t\t->whereIn('order_status_id',[OrderItem::ORDER_STATUS_FINISHED,OrderItem::ORDER_STATUS_CANCELED,OrderItem::ORDER_STATUS_NEGATIVE])","\t\t\t->get();","\t\treturn $items;","\t\t","\t}"],"id":227}],[{"start":{"row":120,"column":2},"end":{"row":130,"column":16},"action":"remove","lines":["$items = OrderItem::whereNotExists(function($query) use ($user_id)","\t\t{","\t\t\t$query->select('*')","\t\t\t\t->from('order_item_request')","\t\t\t\t->whereRaw('order_item_request.item_id = order_item.order_item_id')","\t\t\t\t->where('order_item_request.merchant_id','=',$user_id);","\t\t})","\t\t\t->with(['product', 'attributes'])","\t\t\t->whereIn('order_status_id',[OrderItem::ORDER_STATUS_FINISHED,OrderItem::ORDER_STATUS_CANCELED,OrderItem::ORDER_STATUS_NEGATIVE])","\t\t\t->get();","\t\treturn $items;"],"id":228},{"start":{"row":120,"column":2},"end":{"row":131,"column":16},"action":"insert","lines":["$items = OrderItem::whereHas('itemRequest',function($query) use($user_id){","\t\t\t$query->where('merchant_id',$user_id);","\t\t\t$query->where('is_added_by','merchant');","\t\t})","\t\t\t->with(['brand','brand.stores', 'product', 'attributes','itemRequest'=>function($query) use($user_id){","\t\t\t\t$query->where('merchant_id',$user_id);","\t\t\t\t$query->where('is_added_by',\"merchant\");","\t\t\t},'coupon'])","\t\t\t->where('order_status_id',OrderItem::ORDER_STATUS_REPLIED)","\t\t\t->orderBy('order_item_id','desc')","\t\t\t->get();","\t\treturn $items;"]}],[{"start":{"row":128,"column":53},"end":{"row":128,"column":60},"action":"remove","lines":["REPLIED"],"id":229},{"start":{"row":128,"column":53},"end":{"row":128,"column":54},"action":"insert","lines":["F"]},{"start":{"row":128,"column":54},"end":{"row":128,"column":55},"action":"insert","lines":["I"]},{"start":{"row":128,"column":55},"end":{"row":128,"column":56},"action":"insert","lines":["N"]},{"start":{"row":128,"column":56},"end":{"row":128,"column":57},"action":"insert","lines":["I"]},{"start":{"row":128,"column":57},"end":{"row":128,"column":58},"action":"insert","lines":["S"]},{"start":{"row":128,"column":58},"end":{"row":128,"column":59},"action":"insert","lines":["H"]},{"start":{"row":128,"column":59},"end":{"row":128,"column":60},"action":"insert","lines":["E"]},{"start":{"row":128,"column":60},"end":{"row":128,"column":61},"action":"insert","lines":["D"]}]]},"ace":{"folds":[],"scrolltop":1558,"scrollleft":0,"selection":{"start":{"row":128,"column":61},"end":{"row":128,"column":61},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1528371382547,"hash":"886f3ea66ed9221260c0d83b90ddf379c1eaa001"}